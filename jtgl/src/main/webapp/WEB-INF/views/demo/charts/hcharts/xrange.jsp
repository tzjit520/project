 <!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<%@ page language="java" pageEncoding="UTF-8"%>
<%@ include file="/templates/taglibs.jsp"%>
<html>
<head>
	<title>Highcharts</title>
	<%@ include file="/templates/include.jsp"%>
	<script src="${ctx}/static/plugin/Highcharts-6.0.2/highcharts.js" type="text/javascript"></script>
	<script src="${ctx}/static/plugin/Highcharts-6.0.2/xrange.js" type="text/javascript"></script>
</head>

<body>
	<div class="content-wrapper">
        <div class="row">
            <div class="col-xs-12 heading">
                <h1 class="page-header">Highcharts-DEMO</h1>
            </div>
        </div>
        <div class="outlet">
            <div class="row">
                <div class="panel-body">
              		<div id="container"></div>	
                </div>
            </div>
        </div>
    </div>
 	<div class="clearfix"></div>
 	<script type="text/javascript">
	 	Highcharts.setOptions({
		    //colors: ['#FF9655', '#FFF263', '#DDDF00', '#DDDF00', '#24CBE5', '#64E572', '#FF9655', '#FFF263', '#6AF9C4'],
		    plotOptions: {
		    	series: {
		    		turboThreshold: 0 //防止数据超过1000不显示
		    	}
		    },
			global: {
				useUTC: false
			},
			title: {
	            style: {
	        		color: '#6D869F',
					fontWeight: 'bold'
	            } 
	        },
	        subtitle: { 
	        	style: {
	        		color: '#6D869F',
					fontWeight: 'bold'
	            }
	        }
		});
	 	
	 	$(function(){
		 	var resultData = [{"x":1514736000000,"x2":1514736090000,"y":1},{"x":1514736300000,"x2":1514736650000,"y":2},{"x":1514736600000,"x2":1514736690000,"y":3},{"x":1514736900000,"x2":1514736950000,"y":0},{"x":1514737200000,"x2":1514737250000,"y":3},{"x":1514737500000,"x2":1514737530000,"y":2},{"x":1514737800000,"x2":1514737950000,"y":4},{"x":1514738100000,"x2":1514738190000,"y":1},{"x":1514738400000,"x2":1514738550000,"y":0},{"x":1514738700000,"x2":1514739050000,"y":1},{"x":1514739000000,"x2":1514739090000,"y":0},{"x":1514739300000,"x2":1514739390000,"y":1},{"x":1514739600000,"x2":1514739750000,"y":3},{"x":1514739900000,"x2":1514739950000,"y":2},{"x":1514740200000,"x2":1514740550000,"y":2},{"x":1514740500000,"x2":1514740850000,"y":1},{"x":1514740800000,"x2":1514741150000,"y":3},{"x":1514741100000,"x2":1514741250000,"y":0},{"x":1514741400000,"x2":1514741550000,"y":2},{"x":1514741700000,"x2":1514741790000,"y":4},{"x":1514742000000,"x2":1514742090000,"y":2},{"x":1514742300000,"x2":1514742650000,"y":2},{"x":1514742600000,"x2":1514742630000,"y":2},{"x":1514742900000,"x2":1514743050000,"y":0},{"x":1514743200000,"x2":1514743290000,"y":1},{"x":1514743500000,"x2":1514743530000,"y":0},{"x":1514743800000,"x2":1514743890000,"y":1},{"x":1514744100000,"x2":1514744450000,"y":3},{"x":1514744400000,"x2":1514744750000,"y":0},{"x":1514744700000,"x2":1514744790000,"y":4},{"x":1514745000000,"x2":1514745090000,"y":4},{"x":1514745300000,"x2":1514745350000,"y":0},{"x":1514745600000,"x2":1514745650000,"y":4},{"x":1514745900000,"x2":1514745930000,"y":0},{"x":1514746200000,"x2":1514746230000,"y":4},{"x":1514746500000,"x2":1514746850000,"y":4},{"x":1514746800000,"x2":1514746830000,"y":1},{"x":1514747100000,"x2":1514747450000,"y":1},{"x":1514747400000,"x2":1514747750000,"y":0},{"x":1514747700000,"x2":1514747850000,"y":0},{"x":1514748000000,"x2":1514748350000,"y":1},{"x":1514748300000,"x2":1514748330000,"y":4},{"x":1514748600000,"x2":1514748650000,"y":2},{"x":1514748900000,"x2":1514748990000,"y":2},{"x":1514749200000,"x2":1514749250000,"y":4},{"x":1514749500000,"x2":1514749850000,"y":3},{"x":1514749800000,"x2":1514749890000,"y":3},{"x":1514750100000,"x2":1514750190000,"y":1},{"x":1514750400000,"x2":1514750450000,"y":4},{"x":1514750700000,"x2":1514751050000,"y":0},{"x":1514751000000,"x2":1514751050000,"y":0},{"x":1514751300000,"x2":1514751330000,"y":3},{"x":1514751600000,"x2":1514751950000,"y":4},{"x":1514751900000,"x2":1514751990000,"y":3},{"x":1514752200000,"x2":1514752550000,"y":3},{"x":1514752500000,"x2":1514752590000,"y":2},{"x":1514752800000,"x2":1514752830000,"y":0},{"x":1514753100000,"x2":1514753250000,"y":3},{"x":1514753400000,"x2":1514753430000,"y":0},{"x":1514753700000,"x2":1514753790000,"y":1},{"x":1514754000000,"x2":1514754050000,"y":2},{"x":1514754300000,"x2":1514754450000,"y":0},{"x":1514754600000,"x2":1514754950000,"y":2},{"x":1514754900000,"x2":1514754950000,"y":1},{"x":1514755200000,"x2":1514755290000,"y":4},{"x":1514755500000,"x2":1514755550000,"y":0},{"x":1514755800000,"x2":1514755890000,"y":1},{"x":1514756100000,"x2":1514756190000,"y":3},{"x":1514756400000,"x2":1514756450000,"y":1},{"x":1514756700000,"x2":1514756790000,"y":3},{"x":1514757000000,"x2":1514757090000,"y":0},{"x":1514757300000,"x2":1514757330000,"y":3},{"x":1514757600000,"x2":1514757690000,"y":2},{"x":1514757900000,"x2":1514758050000,"y":2},{"x":1514758200000,"x2":1514758550000,"y":3},{"x":1514758500000,"x2":1514758590000,"y":1},{"x":1514758800000,"x2":1514758830000,"y":2},{"x":1514759100000,"x2":1514759130000,"y":0},{"x":1514759400000,"x2":1514759490000,"y":4},{"x":1514759700000,"x2":1514759850000,"y":0},{"x":1514760000000,"x2":1514760350000,"y":2},{"x":1514760300000,"x2":1514760450000,"y":4},{"x":1514760600000,"x2":1514760630000,"y":4},{"x":1514760900000,"x2":1514760930000,"y":0},{"x":1514761200000,"x2":1514761250000,"y":0},{"x":1514761500000,"x2":1514761590000,"y":2},{"x":1514761800000,"x2":1514761890000,"y":2},{"x":1514762100000,"x2":1514762150000,"y":3},{"x":1514762400000,"x2":1514762450000,"y":1},{"x":1514762700000,"x2":1514762790000,"y":3},{"x":1514763000000,"x2":1514763150000,"y":0},{"x":1514763300000,"x2":1514763650000,"y":4},{"x":1514763600000,"x2":1514763950000,"y":2},{"x":1514763900000,"x2":1514763930000,"y":0},{"x":1514764200000,"x2":1514764250000,"y":1},{"x":1514764500000,"x2":1514764550000,"y":3},{"x":1514764800000,"x2":1514764850000,"y":1},{"x":1514765100000,"x2":1514765450000,"y":4},{"x":1514765400000,"x2":1514765490000,"y":0},{"x":1514765700000,"x2":1514765750000,"y":1},{"x":1514766000000,"x2":1514766350000,"y":1},{"x":1514766300000,"x2":1514766650000,"y":0},{"x":1514766600000,"x2":1514766950000,"y":4},{"x":1514766900000,"x2":1514767050000,"y":2},{"x":1514767200000,"x2":1514767290000,"y":4},{"x":1514767500000,"x2":1514767530000,"y":4},{"x":1514767800000,"x2":1514767890000,"y":3},{"x":1514768100000,"x2":1514768250000,"y":1},{"x":1514768400000,"x2":1514768490000,"y":3},{"x":1514768700000,"x2":1514768730000,"y":1},{"x":1514769000000,"x2":1514769030000,"y":2},{"x":1514769300000,"x2":1514769390000,"y":4},{"x":1514769600000,"x2":1514769630000,"y":3},{"x":1514769900000,"x2":1514769930000,"y":0},{"x":1514770200000,"x2":1514770290000,"y":0},{"x":1514770500000,"x2":1514770850000,"y":1},{"x":1514770800000,"x2":1514770850000,"y":0},{"x":1514771100000,"x2":1514771250000,"y":2},{"x":1514771400000,"x2":1514771490000,"y":1},{"x":1514771700000,"x2":1514771730000,"y":4},{"x":1514772000000,"x2":1514772150000,"y":1},{"x":1514772300000,"x2":1514772390000,"y":3},{"x":1514772600000,"x2":1514772630000,"y":1},{"x":1514772900000,"x2":1514772990000,"y":0},{"x":1514773200000,"x2":1514773550000,"y":3},{"x":1514773500000,"x2":1514773530000,"y":4},{"x":1514773800000,"x2":1514773850000,"y":1},{"x":1514774100000,"x2":1514774450000,"y":0},{"x":1514774400000,"x2":1514774490000,"y":3},{"x":1514774700000,"x2":1514774850000,"y":0},{"x":1514775000000,"x2":1514775050000,"y":3},{"x":1514775300000,"x2":1514775390000,"y":4},{"x":1514775600000,"x2":1514775750000,"y":0},{"x":1514775900000,"x2":1514776250000,"y":4},{"x":1514776200000,"x2":1514776250000,"y":1},{"x":1514776500000,"x2":1514776550000,"y":2},{"x":1514776800000,"x2":1514776950000,"y":3},{"x":1514777100000,"x2":1514777450000,"y":2},{"x":1514777400000,"x2":1514777750000,"y":2},{"x":1514777700000,"x2":1514777790000,"y":2},{"x":1514778000000,"x2":1514778030000,"y":2},{"x":1514778300000,"x2":1514778330000,"y":4},{"x":1514778600000,"x2":1514778750000,"y":1},{"x":1514778900000,"x2":1514778950000,"y":2},{"x":1514779200000,"x2":1514779350000,"y":0},{"x":1514779500000,"x2":1514779550000,"y":3},{"x":1514779800000,"x2":1514779830000,"y":4},{"x":1514780100000,"x2":1514780450000,"y":2},{"x":1514780400000,"x2":1514780450000,"y":2},{"x":1514780700000,"x2":1514780750000,"y":4},{"x":1514781000000,"x2":1514781090000,"y":4},{"x":1514781300000,"x2":1514781330000,"y":2},{"x":1514781600000,"x2":1514781630000,"y":3},{"x":1514781900000,"x2":1514782250000,"y":1},{"x":1514782200000,"x2":1514782250000,"y":2},{"x":1514782500000,"x2":1514782530000,"y":2},{"x":1514782800000,"x2":1514783150000,"y":2},{"x":1514783100000,"x2":1514783190000,"y":0},{"x":1514783400000,"x2":1514783550000,"y":3},{"x":1514783700000,"x2":1514783850000,"y":4},{"x":1514784000000,"x2":1514784030000,"y":4},{"x":1514784300000,"x2":1514784350000,"y":3},{"x":1514784600000,"x2":1514784630000,"y":2},{"x":1514784900000,"x2":1514784950000,"y":1},{"x":1514785200000,"x2":1514785350000,"y":0},{"x":1514785500000,"x2":1514785590000,"y":4},{"x":1514785800000,"x2":1514785830000,"y":4},{"x":1514786100000,"x2":1514786450000,"y":0},{"x":1514786400000,"x2":1514786550000,"y":0},{"x":1514786700000,"x2":1514786750000,"y":4},{"x":1514787000000,"x2":1514787150000,"y":0},{"x":1514787300000,"x2":1514787390000,"y":3},{"x":1514787600000,"x2":1514787650000,"y":4},{"x":1514787900000,"x2":1514788250000,"y":1},{"x":1514788200000,"x2":1514788230000,"y":1},{"x":1514788500000,"x2":1514788850000,"y":4},{"x":1514788800000,"x2":1514788850000,"y":4},{"x":1514789100000,"x2":1514789250000,"y":3},{"x":1514789400000,"x2":1514789550000,"y":2},{"x":1514789700000,"x2":1514789730000,"y":0},{"x":1514790000000,"x2":1514790150000,"y":4},{"x":1514790300000,"x2":1514790390000,"y":4},{"x":1514790600000,"x2":1514790630000,"y":0},{"x":1514790900000,"x2":1514791250000,"y":0},{"x":1514791200000,"x2":1514791350000,"y":0},{"x":1514791500000,"x2":1514791550000,"y":2},{"x":1514791800000,"x2":1514791950000,"y":4},{"x":1514792100000,"x2":1514792250000,"y":2},{"x":1514792400000,"x2":1514792750000,"y":0},{"x":1514792700000,"x2":1514792750000,"y":4},{"x":1514793000000,"x2":1514793150000,"y":4},{"x":1514793300000,"x2":1514793390000,"y":0},{"x":1514793600000,"x2":1514793690000,"y":0},{"x":1514793900000,"x2":1514794050000,"y":4},{"x":1514794200000,"x2":1514794250000,"y":3},{"x":1514794500000,"x2":1514794650000,"y":4},{"x":1514794800000,"x2":1514794890000,"y":1},{"x":1514795100000,"x2":1514795150000,"y":1},{"x":1514795400000,"x2":1514795750000,"y":3},{"x":1514795700000,"x2":1514795730000,"y":2},{"x":1514796000000,"x2":1514796350000,"y":0},{"x":1514796300000,"x2":1514796330000,"y":3},{"x":1514796600000,"x2":1514796690000,"y":0},{"x":1514796900000,"x2":1514797050000,"y":3},{"x":1514797200000,"x2":1514797550000,"y":3},{"x":1514797500000,"x2":1514797550000,"y":1},{"x":1514797800000,"x2":1514797830000,"y":0},{"x":1514798100000,"x2":1514798250000,"y":1},{"x":1514798400000,"x2":1514798490000,"y":1},{"x":1514798700000,"x2":1514798790000,"y":3},{"x":1514799000000,"x2":1514799090000,"y":0},{"x":1514799300000,"x2":1514799390000,"y":3},{"x":1514799600000,"x2":1514799650000,"y":0},{"x":1514799900000,"x2":1514799990000,"y":0},{"x":1514800200000,"x2":1514800290000,"y":4},{"x":1514800500000,"x2":1514800650000,"y":1},{"x":1514800800000,"x2":1514800950000,"y":3},{"x":1514801100000,"x2":1514801190000,"y":1},{"x":1514801400000,"x2":1514801550000,"y":1},{"x":1514801700000,"x2":1514802050000,"y":4},{"x":1514802000000,"x2":1514802090000,"y":2},{"x":1514802300000,"x2":1514802390000,"y":3},{"x":1514802600000,"x2":1514802950000,"y":2},{"x":1514802900000,"x2":1514803050000,"y":4},{"x":1514803200000,"x2":1514803350000,"y":3},{"x":1514803500000,"x2":1514803850000,"y":1},{"x":1514803800000,"x2":1514803950000,"y":3},{"x":1514804100000,"x2":1514804250000,"y":1},{"x":1514804400000,"x2":1514804750000,"y":4},{"x":1514804700000,"x2":1514804730000,"y":2},{"x":1514805000000,"x2":1514805150000,"y":2},{"x":1514805300000,"x2":1514805650000,"y":1},{"x":1514805600000,"x2":1514805950000,"y":2},{"x":1514805900000,"x2":1514805930000,"y":3},{"x":1514806200000,"x2":1514806290000,"y":1},{"x":1514806500000,"x2":1514806590000,"y":0},{"x":1514806800000,"x2":1514806950000,"y":3},{"x":1514807100000,"x2":1514807190000,"y":1},{"x":1514807400000,"x2":1514807750000,"y":4},{"x":1514807700000,"x2":1514807730000,"y":0},{"x":1514808000000,"x2":1514808030000,"y":3},{"x":1514808300000,"x2":1514808330000,"y":1},{"x":1514808600000,"x2":1514808650000,"y":4},{"x":1514808900000,"x2":1514808950000,"y":2},{"x":1514809200000,"x2":1514809250000,"y":2},{"x":1514809500000,"x2":1514809590000,"y":2},{"x":1514809800000,"x2":1514809850000,"y":2},{"x":1514810100000,"x2":1514810190000,"y":0},{"x":1514810400000,"x2":1514810450000,"y":2},{"x":1514810700000,"x2":1514811050000,"y":3},{"x":1514811000000,"x2":1514811350000,"y":4},{"x":1514811300000,"x2":1514811330000,"y":2},{"x":1514811600000,"x2":1514811950000,"y":0},{"x":1514811900000,"x2":1514812050000,"y":1},{"x":1514812200000,"x2":1514812290000,"y":2},{"x":1514812500000,"x2":1514812530000,"y":2},{"x":1514812800000,"x2":1514812830000,"y":0},{"x":1514813100000,"x2":1514813150000,"y":4},{"x":1514813400000,"x2":1514813450000,"y":3},{"x":1514813700000,"x2":1514814050000,"y":3},{"x":1514814000000,"x2":1514814350000,"y":3},{"x":1514814300000,"x2":1514814390000,"y":0},{"x":1514814600000,"x2":1514814630000,"y":0},{"x":1514814900000,"x2":1514814990000,"y":4},{"x":1514815200000,"x2":1514815250000,"y":2},{"x":1514815500000,"x2":1514815550000,"y":3},{"x":1514815800000,"x2":1514815950000,"y":0},{"x":1514816100000,"x2":1514816130000,"y":0},{"x":1514816400000,"x2":1514816550000,"y":1},{"x":1514816700000,"x2":1514816730000,"y":3},{"x":1514817000000,"x2":1514817030000,"y":2},{"x":1514817300000,"x2":1514817390000,"y":0},{"x":1514817600000,"x2":1514817650000,"y":3},{"x":1514817900000,"x2":1514817930000,"y":2},{"x":1514818200000,"x2":1514818350000,"y":1},{"x":1514818500000,"x2":1514818590000,"y":4},{"x":1514818800000,"x2":1514818830000,"y":3},{"x":1514819100000,"x2":1514819450000,"y":1},{"x":1514819400000,"x2":1514819430000,"y":0},{"x":1514819700000,"x2":1514819790000,"y":4},{"x":1514820000000,"x2":1514820030000,"y":2},{"x":1514820300000,"x2":1514820450000,"y":3},{"x":1514820600000,"x2":1514820950000,"y":3},{"x":1514820900000,"x2":1514820950000,"y":2},{"x":1514821200000,"x2":1514821290000,"y":1},{"x":1514821500000,"x2":1514821590000,"y":0},{"x":1514821800000,"x2":1514821890000,"y":1},{"x":1514822100000,"x2":1514822190000,"y":4}];
		 	var minTime = 1514736000000;
		 	var maxTime = 1514822340000;
		 	//初始化图形数据
		 	initData(resultData, minTime, maxTime);
	 	})
	 	
	 	var time = 1000*60*5;//5分钟
	 	
	 	//初始化图形数据
	 	function initData(resultData, minTime, maxTime){
	 		var categoriesArray = ['地铁', '工作', '家庭', '休息', '娱乐'];
	 		var seriesArray = [];
	 		for(var c = 0; c < categoriesArray.length; c++){
	 			var series = {};
		 		series.name = categoriesArray[c];
		 		series.pointWidth = 20;
		 		//填充数据
		 		var dataArray = [];
	 			for(var i = 0; i < resultData.length; i++){
	 				var data = resultData[i];
	 				if(data.y == c){
	 					//这一句加额外时间  只为显示直观
	 					data.x2 = data.x2 + time;
		 				dataArray.push(data);
	 				}
	 			}
	 			series.data = dataArray;
	 			seriesArray.push(series);
	 		}
	 		//填充图形数据并加载
	 		initXrange(seriesArray, categoriesArray, minTime, maxTime)
	 	}
	 	
	 	//填充图形数据并加载
	 	function initXrange(seriesArray, categoriesArray, minTime, maxTime){
	 		chart = new Highcharts.Chart({
				chart: {
					renderTo: 'container',
					type: 'xrange'
				},
				title: {
		            text: '工作量统计'
		        },
		        subtitle: { 
		            text: ''
		        }, 
				xAxis: {
					type: 'datetime',
					dateTimeLabelFormats: {
						day : '%Y-%m-%d',
		            	month : '%Y-%m-%d',
		            	year : '%Y-%m-%d'
		            },
		            min: minTime,
		            max: maxTime,
		            tickInterval: 1000*60*60*2,
		            lineWidth: 2 //基线宽度 
				},
				yAxis: {
					title: {
						text: ''
					},
					categories: categoriesArray,
					reversed: true,//反转
					//opposite: true,//对立面显示
					lineWidth:1
				},
				tooltip: {
					formatter: function () {
						var t1 = formatDate(this.x);
						var t2 = formatDate(this.x2-time);
						return '<b>'+t1+'至'+t2+'</b><br/>'+this.point.series.name;
					}
				},
				credits: { //图表版权信息
		            enabled: false
		        }, 
		        plotOptions: {
			    	xrange: {
			    		grouping: false //是否将非堆叠列分组或使它们彼此独立地呈现,非分组列将单独布局并相互重叠
			    	}
			    },
				series: seriesArray
			});
	 	}
	 	
	 	//时间格式化
	 	function formatDate(time){
			var d = new Date();
			d.setTime(time);
			var year = d.getFullYear();
			var month = (d.getMonth() + 1) < 10 ? "0" + (d.getMonth()+1) : d.getMonth()+1;		
			var day = d.getDate() < 10 ? "0" + d.getDate() : d.getDate();
			var hours = d.getHours() < 10 ? "0" + d.getHours() : d.getHours();
			var minutes = d.getMinutes() < 10 ? "0" + d.getMinutes() : d.getMinutes();
			var seconds = d.getSeconds() < 10 ? "0" + d.getSeconds() : d.getSeconds();
			return year + "-" + month + "-" + day + " " + hours + ":" + minutes + ":" + seconds;						
		}
	 	
	 	/* 下面java代码是生成本次图形的json数据代码  
	 	SimpleDateFormat sdf = new SimpleDateFormat("yyyy-MM-dd HH:mm:ss");
		String date = "2018-01-01 00:00:00";
		//开始时间
		Calendar startDate = Calendar.getInstance();
		startDate.setTime(sdf.parse(date));
		//截止时间
		Calendar breakDate = Calendar.getInstance();
		breakDate.setTime(sdf.parse(date));
		breakDate.add(Calendar.DATE, 1);//加一天
		//随机数
		Random random = new Random();
		
		String jsonData = "";
		String[] categoriesArray = {"地铁", "工作", "家庭", "休息", "娱乐"};
		//时长
		long[] sc = {1000*30,1000*50,1000*90,1000*150,1000*350,1000*650,1000*900};
		int i = 0;
		while(startDate.compareTo(breakDate) < 0){
			int y = random.nextInt(categoriesArray.length);
			System.out.println(startDate.getTime().getTime()+"=="+sdf.format(startDate.getTime())+"==y:"+y);
			if(i%5 == 0){
				long x  = startDate.getTime().getTime();
				long x2  = startDate.getTime().getTime()+sc[random.nextInt(5)];
				if(StringUtils.isNotBlank(jsonData)){
					jsonData += ",";
				}
				jsonData += "{\"x\":"+ x +",\"x2\":"+ x2 +",\"y\":"+ y +"}";
			}
			i++;
			startDate.add(Calendar.MINUTE, 1);
		}
		String json = "[" +jsonData +"]";
		System.out.println(json); */
 	</script>
</body>